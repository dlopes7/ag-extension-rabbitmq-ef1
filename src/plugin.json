{
  "name": "custom.remote.python.rabbit_mq",
  "version": "1.009",
  "metricGroup": "tech.RabbitMQ",
  "technologies": ["RabbitMQ"],
  "type": "python",
  "entity": "CUSTOM_DEVICE",
  "source": {
    "package": "rabbitmq_extension",
    "className": "RabbitMQExtension",
    "install_requires": []
  },
  "properties": [
    {"key": "rabbitmq_nodes", "type": "Textarea"},
    {"key": "rabbitmq_username", "type": "String", "defaultValue": "guest"},
    {"key": "cluster_name", "type": "String", "defaultValue": "RabbitMQ Cluster"},
    {"key": "rabbitmq_password", "type": "Password"},
    {"key": "queues_include", "type": "Textarea", "defaultValue": ".*"},
    {"key": "queues_ignore", "type": "Textarea"},
    {"key": "frequency", "type": "Integer", "defaultValue": 1},
    {"key": "collect_messages_ready", "type": "Boolean", "defaultValue": true},
    {"key": "collect_messages_unacknowledged", "type": "Boolean", "defaultValue": true},
    {"key": "collect_messages_ack", "type": "Boolean", "defaultValue": true},
    {"key": "collect_messages_deliver_get", "type": "Boolean", "defaultValue": true},
    {"key": "collect_messages_publish", "type": "Boolean", "defaultValue": true},
    {"key": "collect_messages_redeliver", "type": "Boolean", "defaultValue": true},
    {"key": "collect_messages_return", "type": "Boolean", "defaultValue": true}
  ],
  "configUI": {
    "displayName": "RabbitMQ",
    "properties": [
      {"key": "rabbitmq_nodes", "displayName": "RabbitMQ Nodes", "displayHint": "One management url per line. Only add nodes that belong to the same cluster, example: http://my.host:15672", "displayOrder": 1},
      {"key": "rabbitmq_username", "displayName": "RabbitMQ User", "displayOrder": 2},
      {"key": "rabbitmq_password", "displayName": "RabbitMQ Password", "displayOrder": 3},
      {"key": "cluster_name", "displayName": "RabbitMQ Cluster Name", "displayHint": "This will be used as the Dynatrace group name, it does not have to match the real cluster name", "displayOrder": 4},
      {"key": "queues_include", "displayName": "Queues to include", "displayHint": "One regex expression per line, use .* to monitor all", "displayOrder": 5},
      {"key": "queues_ignore", "displayName": "Queues to ignore", "displayHint": "One regex expression per line, has precedence over include", "displayOrder": 6},
      {"key": "frequency", "displayName": "Frequency (minutes)", "displayOrder": 7},
      {"key": "collect_messages_ready", "displayName": "Collect Ready", "displayOrder": 7},
      {"key": "collect_messages_unacknowledged", "displayName": "Collect Unacknowledged", "displayOrder": 8},
      {"key": "collect_messages_ack", "displayName": "Collect Acknowledge", "displayOrder": 9},
      {"key": "collect_messages_deliver_get", "displayName": "Collect Deliver Get", "displayOrder": 10},
      {"key": "collect_messages_publish", "displayName": "Collect Publish", "displayOrder": 11},
      {"key": "collect_messages_redeliver", "displayName": "Collect Redeliver", "displayOrder": 12},
      {"key": "collect_messages_return", "displayName": "Collect Return", "displayOrder": 13}
    ]
  },
  "metrics": [
    {"timeseries": {"key": "messages_ready", "unit": "Count", "dimensions": ["Queue", "VirtualHost"],"displayname": "Messages Ready", "topxconfig": {"limit": 1000}}},
    {"timeseries": {"key": "messages_unacknowledged", "unit": "Count", "dimensions": ["Queue", "VirtualHost"],"displayname": "Messages Unacknowledged", "topxconfig": {"limit": 1000}}},
    {"timeseries": {"key": "messages_ack", "unit": "Count", "dimensions": ["Queue", "VirtualHost"],"displayname": "Messages Acknowledged", "topxconfig": {"limit": 1000}}},
    {"timeseries": {"key": "messages_deliver_get", "unit": "Count", "dimensions": ["Queue", "VirtualHost"],"displayname": "Messages Deliver Get", "topxconfig": {"limit": 1000}}},
    {"timeseries": {"key": "messages_publish", "unit": "Count", "dimensions": ["Queue", "VirtualHost"],"displayname": "Messages Publish", "topxconfig": {"limit": 1000}}},
    {"timeseries": {"key": "messages_redeliver", "unit": "Count", "dimensions": ["Queue", "VirtualHost"],"displayname": "Messages Redeliver", "topxconfig": {"limit": 1000}}},
    {"timeseries": {"key": "messages_return", "unit": "Count", "dimensions": ["Queue", "VirtualHost"],"displayname": "Messages Return", "topxconfig": {"limit": 1000}}}
  ],
  "ui": {
    "keymetrics": [
      {"key": "messages_ready", "displayname": "Ready", "mergeaggregation": "SUM"},
      {"key": "messages_deliver_get", "displayname": "Deliver", "mergeaggregation": "SUM"}
    ],
    "charts": [
    {"group": "Messages", "title": "Message rates", "series":  [
      {"key": "messages_ack", "displayname": "Acknowledge"},
      {"key": "messages_deliver_get", "displayname": "Deliver Get"},
      {"key": "messages_publish", "displayname": "Publish"},
      {"key": "messages_redeliver", "displayname": "Redeliver"},
      {"key": "messages_return", "displayname": "Return"}
    ]},
    {"group": "Messages", "title": "Messages", "series":  [
      {"key": "messages_ready", "displayname": "Ready"},
      {"key": "messages_unacknowledged", "displayname": "Unacknowledged"}
    ]}
  ],
  "keycharts": [
    {"group": "Messages", "title": "Message rates", "series":  [
      {"key": "messages_ack", "displayname": "Acknowledge", "mergeaggregation": "SUM"},
      {"key": "messages_deliver_get", "displayname": "Deliver Get", "mergeaggregation": "SUM"},
      {"key": "messages_publish", "displayname": "Publish", "mergeaggregation": "SUM"},
      {"key": "messages_redeliver", "displayname": "Redeliver", "mergeaggregation": "SUM"},
      {"key": "messages_return", "displayname": "Return", "mergeaggregation": "SUM"}
    ]},
    {"group": "Messages", "title": "Messages", "series":  [
      {"key": "messages_ready", "displayname": "Ready", "mergeaggregation": "SUM"},
      {"key": "messages_unacknowledged", "displayname": "Unacknowledged", "mergeaggregation": "SUM"}
    ]}
  ]}
}
